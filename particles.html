<!DOCTYPE html>
<html>
<head>
  <title>Michael Bradford Williams | Particles</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="./css/styles.css" />
  <link rel="shortcut icon" href="favicon.ico" />
  <script language="JavaScript" type="text/javascript" src="./js/randomImage.js"></script>
  <link type="text/css" rel="StyleSheet" href="./css/winclassic.css" />
  <script type="text/javascript" src="./js/range.js"></script>
  <script type="text/javascript" src="./js/timer.js"></script>
  <script type="text/javascript" src="./js/slider.js"></script>
  <script type="text/javascript" src="./js/canvasUtil.js"></script>
  <script type="text/javascript" src="./js/particles.js"></script>
</head>

<body onload="init(1);">

<div class="content-row" id="header-row">
  <h2>Michael Bradford Williams</h2>
  <h3><a href="./index.html">Home</a> / <a href="./prog.html">Programming</a> / Particles in a gravitational field</h3>
</div>

<div class="content-row">

<p>
Here's a simple simulation of particles (the colorful circles) in a (classical) gravitational field generated by randomly placed attractors (the black circles).  The controls should be self-explanatory.
</p>

<p>
Note: this program has not been optimized for mobile web browsers.
Here is a <a href="./particles_xl.html">larger version</a> that is more suited to desktop browsers.
</p>

</div>

<div class="content-row" id="controls">
  <table border="0" align="center">
    <tr>
      <td align="right"><p>Number of Particles:</p></td>
      <td><div class="slider" id="partSlider" tabIndex="1">
        <input class="slider-input" id="partSliderInput"/></div></td>
      <td><input id="part-view" size="2" /></td>
      <td></td>
      <td><input type="button" name="refresh-part" value="Refresh Particles" onClick="refreshParticles();" /></td>
    </tr>

    <tr>
      <td align="right"><p>Number of Attractors:</p></td>
      <td><div class="slider" id="attSlider" tabIndex="1">
        <input class="slider-input" id="attSliderInput"/></div></td>
      <td><input id="att-view" size="2" /></td>
      <td></td>
      <td><input type="button" name="refresh-att" value="Refresh Attractors" onClick="refreshAttractors();" /></td>
    </tr>

    <tr>
      <td align="right"><p>Gravity Strength:</p></td>
      <td><div class="slider" id="gSlider" tabIndex="1">
        <input class="slider-input" id="gSliderInput"/></div></td>
      <td><input id="g-view" size="2" /></td>
      <td></td>
      <td><input type="button" name="pause" value="Pause Animation" onClick="pauseDrawing();">
    </tr>

    <tr>
      <td align="right"><p>Confine Particles to Canvas:</p></td>
      <td><select id="confine">
          <option value="0" selected>Yes</option>
          <option value="1">No</option>
        </select></td>
    </tr>

    <tr>
      <td align="right"><p>Particles contribute to gravity:</p></td>
      <td><select id="massive">
          <option value="0" selected>Yes</option>
          <option value="1">No</option>
        </select></td>
    </tr>
  </table>
</div>

<script type="text/javascript">

var partSl = new Slider(document.getElementById("partSlider"), document.getElementById("partSliderInput"));
var attSl  = new Slider(document.getElementById("attSlider"),  document.getElementById("attSliderInput"));
var gSl    = new Slider(document.getElementById("gSlider"),    document.getElementById("gSliderInput"));

partSl.setMinimum(NUM_PARTICLES_MIN);
partSl.setValue(NUM_PARTICLES);
partSl.setMaximum(NUM_PARTICLES_MAX);
document.getElementById("part-view").value = NUM_PARTICLES;

attSl.setMinimum(NUM_ATTRACTORS_MIN);
attSl.setValue(NUM_ATTRACTORS);
attSl.setMaximum(NUM_ATTRACTORS_MAX);
document.getElementById("att-view").value = NUM_ATTRACTORS;

gSl.setMinimum(G_POW_MIN);
gSl.setValue(G_POW);
gSl.setMaximum(G_POW_MAX);
document.getElementById("g-view").value = G_POW;

partSl.onchange = function () {
  document.getElementById("part-view").value = partSl.getValue();
  NUM_PARTICLES = parseInt(partSl.getValue());
    canvasUtil.println(`new number of particles = ${NUM_PARTICLES}`);
};

attSl.onchange = function () {
  document.getElementById("att-view").value = attSl.getValue();
  NUM_ATTRACTORS = parseInt(attSl.getValue());
  canvasUtil.println(`new number of attractors = ${NUM_ATTRACTORS}`);
};

gSl.onchange = function () {
  document.getElementById("g-view").value = gSl.getValue();
  G_POW = parseInt(gSl.getValue());
  canvasUtil.println(`new Gravity exponent = ${G_POW}`);
};

window.onresize = function () {
  partSl.recalculate();
  attSl.recalculate();
  gSl.recalculate();
  init();
};

</script>

<div class="canvas-row">
  <canvas id="canvas" width="250" height="500">
    <p>Your browser is currently unsupported.</p>
  </canvas>
</div>

<div class="content-row">
  <table align="center">
    <tr>
      <td><form name="outform">
          <textarea rows="1" cols="30" name="output"></textarea>
          </form>
      </td>
    </tr>
  </table>
</div>

</body>
</html>
