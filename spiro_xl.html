<!DOCTYPE html>
<html>
<head>
  <title>Michael Bradford Williams - Spirographs</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="./css/styles_xl.css" />
  <link type="text/css" rel="StyleSheet" href="./css/winclassic.css" />
  <link rel="shortcut icon" href="favicon.ico" />
  <script type="text/javascript" src="./js/range.js"></script>
  <script type="text/javascript" src="./js/timer.js"></script>
  <script type="text/javascript" src="./js/slider.js"></script>
  <script language="JavaScript" type="text/javascript" src="./js/canvasUtil.js"></script>
  <script language="JavaScript" type="text/javascript" src="./js/spiro.js"></script>
</head>

<body onload="init(1);">

<div class="content-row" id="controls">
  <form name="parameters" action="#">
    <table border="0" align="center">
      <tr>
    	  <td><p>k</p></td>
          <td><div class="slider" id="kSlider" tabIndex="1"><input class="slider-input" id="kSliderInput"/></div></td>
          <td> </td>
          <td><p>l</p></td>
          <td><div class="slider" id="lSlider" tabIndex="2"><input class="slider-input" id="lSliderInput"/></div></td>
          <td> </td>
          <td colspan="1" align="center"><input type="reset" name="reset" value="Refresh" onClick="resetDrawing();"></td></form>
          <td><form name="outform" action="#">
          <textarea rows="1" cols="25" name="output"></textarea>
        </td>
      </tr>
    </table>
  </form>
</div>

<script type="text/javascript">
var kSlider = new Slider(document.getElementById("kSlider"), document.getElementById("kSliderInput"));
kSlider.setMinimum(SLIDER_MIN);
kSlider.setMaximum(SLIDER_MAX);
kSlider.setValue(
  actualToSlider(
    kSlider.getMinimum(),
    kSlider.getMaximum(),
    K_MIN,
    K_MAX,
    K_DEFAULT
  )
);

var lSlider = new Slider(document.getElementById("lSlider"), document.getElementById("lSliderInput"));
lSlider.setMinimum(SLIDER_MIN);
lSlider.setMaximum(SLIDER_MAX);
lSlider.setValue(
  actualToSlider(
    lSlider.getMinimum(),
    lSlider.getMaximum(),
    L_MIN,
    L_MAX,
    L_DEFAULT
  )
);

function update() {
  let dsAvg = sliderToActual(
    kSlider.getMinimum(),
    kSlider.getMaximum(),
    K_MIN,
    K_MAX,
    kSlider.getValue()
  );
  let angle = sliderToActual(
    lSlider.getMinimum(),
    lSlider.getMaximum(),
    L_MIN,
    L_MAX,
    lSlider.getValue()
  );
  draw(dsAvg, angle);
}

kSlider.onchange = update;
lSlider.onchange = update;

window.onresize = function () {
  kSlider.recalculate();
  lSlider.recalculate();
};
</script>

<div class="canvas-row">
  <canvas id="canvas" width="750" height="500"></canvas>
</div>

</body>
</html>
